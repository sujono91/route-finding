/**
 * angular-starter - AngularJS Project Template based on Johnpapa Guideline
 * @authors 
 * @version v2.0.0
 * @link 
 * @license 
 */
!function(){"use strict";angular.module("app",["app.core","app.dashboard","app.layout","app.widget"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.core",["blocks.exception","blocks.logger","blocks.router","app.core.data","ngAnimate","ngSanitize","ui.router","ui.bootstrap","ngMap"])}(),function(){"use strict";angular.module("app.core.data",["app.core","blocks.exception"])}(),function(){"use strict";angular.module("app.dashboard",["app.core"])}(),function(){"use strict";angular.module("app.layout",["app.core"])}(),function(){"use strict";angular.module("app.widget",["app.core"])}(),function(){"use strict";function n(){this.config={appErrorPrefix:void 0},this.configure=function(n){this.config.appErrorPrefix=n},this.$get=function(){return{config:this.config}}}function t(n){n.decorator("$exceptionHandler",e)}function e(n,t,e){return function(a,r){var o=t.config.appErrorPrefix||"",i={exception:a,cause:r};a.message=o+a.message,e.error(a.message,i),n(a,r)}}t.$inject=["$provide"],angular.module("blocks.exception").provider("exceptionHandler",n).config(t),e.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function n(n){function t(t){return function(e){n.log(t,e)}}var e={catcher:t};return e}n.$inject=["logger"],angular.module("blocks.exception").factory("exception",n)}(),function(){"use strict";function n(n,t){function e(e,a,r){t.error(e,r),n.error("Error: "+e,a)}function a(e,a,r){t.info(e,r),n.info("Info: "+e,a)}function r(e,a,r){t.success(e,r),n.info("Success: "+e,a)}function o(e,a,r){t.warning(e,r),n.warn("Warning: "+e,a)}var i={showToasts:!0,error:e,info:a,success:r,warning:o,log:n.log};return i}n.$inject=["$log","toastr"],angular.module("blocks.logger").factory("logger",n)}(),function(){"use strict";function n(n,t,e){function a(n,a,o,i){function c(n,a){n.forEach(function(n){n.config.resolve=angular.extend(n.config.resolve||{},r.resolveAlways),t.state(n.state,n.config)}),a&&!f&&(f=!0,e.otherwise(a))}function s(){a.$on("$stateChangeError",l)}function l(t,e,a,r,o,c){if(!g){m.errors++,g=!0;var s=e&&(e.title||e.name||e.loadedTemplateUrl)||"unknown target",l="Error routing to "+s+". "+(c.data||"")+". <br/>"+(c.statusText||"")+": "+(c.status||"");i.error(l,[e]),n.path("/")}}function u(){s(),p()}function d(){return o.get()}function p(){a.$on("$stateChangeSuccess",function(n,t,e,o,i){m.changes++,g=!1;var c=r.docTitle+" "+(t.title||"");a.title=c})}var g=!1,f=!1,m={errors:0,changes:0},h={configureStates:c,getStates:d,stateCounts:m,handleStateChangeError:l};return u(),h}a.$inject=["$location","$rootScope","$state","logger"];var r={docTitle:void 0,resolveAlways:{}};n.html5Mode(!0),this.configure=function(n){angular.extend(r,n)},this.$get=a}n.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],angular.module("blocks.router").provider("routerHelper",n)}(),function(){"use strict";function n(n){n.options.timeOut=4e3,n.options.positionClass="toast-bottom-right"}function t(n,t,e){n.debugEnabled(!0),e.configure(a.appErrorPrefix),t.configure({docTitle:a.appTitle+": "})}n.$inject=["toastr"],t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"];var e=angular.module("app.core");e.config(n);var a={appTitle:"Project",appErrorPrefix:"[ToDoList Error] "};e.value("config",a),e.config(t)}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment).constant("_",_).constant("constant",{APP_NAME:"Route Finding",API_HOST:"https://aqueous-plains-83586.herokuapp.com",STATIC_MAP_API:"https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyDAERBv9jkVSgNHaQBYGz52Ob7kO5XNBDI"})}(),function(){"use strict";function n(n){var e="/404";n.configureStates(t(),e)}function t(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}n.$inject=["routerHelper"],angular.module("app.core").run(n)}(),function(){"use strict";function n(n,t,e,a,r){function o(a,r,o){return r=r?"?"+$.param(r):"",o=o||{},t.get(u+a+r,o).then(function(t){return n.when(t.data)})["catch"](function(t){return e.catcher("Failed get data")(t),n.reject(t.data)})}function i(a,r){return t.post(u+a,r).then(function(t){return n.when(t.data)})["catch"](function(t){return e.catcher("Failed post data")(t),n.reject(t.data)})}function c(a,r){return t.put(u+a,r).then(function(t){return n.when(t.data)})["catch"](function(t){return e.catcher("Failed put data")(t),n.reject(t.data)})}function s(a,r){return t.patch(u+a,r).then(function(t){return n.when(t.data)})["catch"](function(t){return e.catcher("Failed patch data")(t),n.reject(t.data)})}function l(a){return t["delete"](u+a).then(function(t){return n.when(t)})["catch"](function(t){return e.catcher("Failed delete data")(t),n.reject(t.data)})}var u=a.API_HOST+"/api/",d={endpoints:r,get:o,post:i,put:c,patch:s,del:l};return d}n.$inject=["$q","$http","exception","constant","ENDPOINTS"],angular.module("app.core.data").factory("dataService",n)}(),function(){"use strict";angular.module("app.core.data").constant("ENDPOINTS",{LOCATIONS:"locations"})}(),function(){"use strict";function n(n,t,e,a,r,o){function i(){v.isLoading=!0,t.getMap().then(function(n){v.map=n}).then(c)["finally"](function(){v.isLoading=!1})}function c(){return a.get(k.LOCATIONS).then(s)}function s(n){b=!1,n.length>0&&(v.origin=n[0].address,v.destination=n[n.length-1].address),o.forEach(n,function(n){v.markers.push({id:n.id,lat:n.latitude,lng:n.longitude}),u()})}function l(n){b=!0,v.markers.push({lat:n.latLng.lat(),lng:n.latLng.lng()}),u()}function u(){v.wayPoints.push({location:v.markers[v.markers.length-1],stopover:!0});var n=v.wayPoints.length-1,t={lat:v.wayPoints[n].location.lat,lng:v.wayPoints[n].location.lng};if(b)return void $.geocode({location:t},d)}function d(n){var t=n[0].formatted_address;v.addresses.push(t),1===v.wayPoints.length&&(v.origin=t),v.destination=t,p()}function p(){b=!1,v.isLoading=!0,a.post(k.LOCATIONS,{latitude:v.markers[v.markers.length-1].lat,longitude:v.markers[v.markers.length-1].lng,address:v.addresses[v.addresses.length-1]}).then(function(t){n.success("Succesfully save marker"),v.markers[v.markers.length-1].id=t.id})["finally"](function(){v.isLoading=!1})}function g(){if(v.markers.length>0){var n=v.markers[v.markers.length-1].id;f(n)["finally"](m)}}function f(t){return v.isLoading=!0,a.del(k.LOCATIONS+"/"+t).then(function(t){n.success("Successfully remove marker")})}function m(){v.markers.pop(),v.wayPoints.pop(),v.addresses.pop(),0===v.markers.length&&(v.origin="",v.destination=""),v.isLoading=!1}function h(){var n=v.map.getCenter(),t=angular.copy(w);t+="&center="+n.lat()+","+n.lng(),t+="&size=640x480",t+="&maptype=google.maps.MapTypeId.ROADMAP",t+="&zoom="+v.map.getZoom(),v.markers.forEach(function(n){t+="&markers=color:red|"+n.lat+","+n.lng}),e.open(t)}var v=this,k=a.endpoints;v.jktGeoLocation="-6.2297263, 106.6890863",v.pushMarker=l,v.map=null,v.wayPoints=[],v.markers=[],v.origin="",v.destination="",v.addresses=[],v.popMarker=g,v.exportMap=h,v.isLoading=!1;var b=!1,$=new google.maps.Geocoder,w=r.STATIC_MAP_API;i()}n.$inject=["logger","NgMap","$window","dataService","constant","_"],angular.module("app.dashboard").controller("DashboardController",n)}(),function(){"use strict";function n(n){n.configureStates(t())}function t(){return[{state:"dashboard",config:{url:"/",templateUrl:"app/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm",title:"Dashboard",settings:{nav:1,content:'<i class="fa fa-dashboard"></i> Dashboard'}}}]}n.$inject=["routerHelper"],angular.module("app.dashboard").run(n)}(),function(){"use strict";function n(n,t){function e(){var n=this;n.appName=t.APP_NAME}var a={bindToController:!0,controller:e,controllerAs:"vm",restrict:"EA",scope:{navline:"="},templateUrl:"app/layout/ht-top-nav.html"};return a}n.$inject=["$state","constant"],angular.module("app.layout").directive("htTopNav",n)}(),angular.module("app.core").run(["$templateCache",function(n){n.put("app/core/404.html",'<section id="dashboard-view" class="mainbar">\n    <section class="matter">\n        <div class="container">\n            <div class="row">\n                <div class="col-md-10 col-md-offset-1">\n                    <h1>Oops...</h1>\n                    <p>The page you\'re looking is not found</p>\n                </div>\n            </div>\n        </div>\n    </section>\n</section>\n'),n.put("app/dashboard/dashboard.html",'<section id="dashboard-view" class="mainbar">\n    <section class="matter">\n        <div class="container">\n            <div class="row">\n                <div class="col-md-10 col-md-offset-1">\n                    <div class="panel panel-default">\n                        <div class="panel-heading">\n                            <h4 class="pull-left">\n                                Click Map to Add Marker\n                            </h4>\n                            <button class="btn btn-success pull-right" ng-click="vm.exportMap()">\n                                Export\n                            </button>\n                            <button class="btn btn-danger pull-right" download ng-click="vm.popMarker()">\n                                Delete Last Marker\n                            </button>\n                            <div class="clearfix">\n                            </div>\n                        </div>\n                        <div class="panel-body">\n                            <div>\n                                <ng-map center="{{ vm.jktGeoLocation }}" on-click="vm.pushMarker()">\n                                    <marker ng-repeat="marker in vm.markers" position="{{marker.lat}}, {{marker.lng}}">\n                                    </marker>\n                                    <directions ng-if="vm.origin !== \'\'" draggable="true" provide-route-alternatives="true" panel="directions-panel" suppress-markers="true" travel-mode="DRIVING" waypoints="{{ vm.wayPoints }}" origin="{{ vm.origin }}" destination="{{ vm.destination }}">\n                                    </directions>\n                                </ng-map>\n                            </div>\n                            <div class="column small-12 text-center" ng-show="vm.isLoading">\n\t\t\t\t\t\t\t    <br>\n                                <i class="fa fa-spinner fa-spin fa-4x"></i>\n                                <div><label>Loading...</label></div>\n\t\t\t\t\t\t    </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</section>'),n.put("app/layout/ht-top-nav.html",'<nav class="navbar navbar-inverse navbar-fixed-top">\n  <div class="container">\n    <div class="navbar-header">\n      <a class="navbar-brand" href="#">{{vm.appName}}</a>\n    </div>\n  </div>\n</nav>')}]);